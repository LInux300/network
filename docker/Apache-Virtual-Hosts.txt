#------------------------------------------------------------------------------
# Apache Virtual Hosts
# Ubuntu 14.04 LTS
# https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-ubuntu-14-04-lts
#------------------------------------------------------------------------------
sudo apt-get update
sudo apt-get install apache2


# Create Directory Structure
sudo mkdir -p /var/www/example.com/public_html
sudo mkdir -p /var/www/test.com/public_html

# Grant Permissions
sudo chown -R $USER:$USER /var/www/example.com/public_html
sudo chown -R $USER:$USER /var/www/test.com/public_html
sudo chmod -R 755 /var/www

# Create Demo Pages for Each Virtual Host
vim /var/www/example.com/public_html/index.html
"
<html>
  <head>
    <title>Welcome to Example.com!</title>
  </head>
  <body>
    <h1>Success!  The example.com virtual host is working!</h1>
  </body>
</html>
"
cp /var/www/example.com/public_html/index.html /var/www/test.com/public_html/index.html
vim /var/www/test.com/public_html/index.html


# Create New Virtual Host Files
sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/example.com.conf
sudo vim /etc/apache2/sites-available/example.com.conf
"
<VirtualHost *:80>
    ServerAdmin admin@example.com
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/example.com/public_html
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
"
sudo cp /etc/apache2/sites-available/example.com.conf /etc/apache2/sites-available/test.com.conf
"
"

# Enable the New Virtual Host Files
sudo a2ensite example.com.conf
sudo a2ensite test.com.conf
sudo service apache2 restart


# Set Up Local Hosts File
sudo vim /etc/hosts
"
127.0.0.1   localhost
127.0.1.1   guest-desktop
111.111.111.111 example.com
111.111.111.111 test.com
"

# Test your Results 
http://example.com
http://test.com

# Help
# sudo apt-get install links2
# links2 www.google.com


